# Supabase 確認メールの内容を変更する

新規登録時に送られる「確認メール」（Confirm signup）の件名や本文は、Supabase のダッシュボードから変更できます。丁寧な日本語の文面にしたい場合の手順と例です。

---

## 1. どこで変更するか

1. [Supabase](https://supabase.com) にログインし、対象プロジェクトを開く
2. 左メニュー **Authentication** → **Email Templates**
3. **Confirm signup** を選ぶ

ここで「Subject」（件名）と「Body」（本文）を編集できます。

---

## 2. 使える変数（そのまま貼り付けてOK）

メール本文では、次の変数が使えます。Supabase が自動で置き換えます。

| 変数 | 説明 |
|------|------|
| `{{ .ConfirmationURL }}` | 確認用リンク（ここをクリックするとメール認証が完了します） |
| `{{ .Token }}` | 確認用トークン（通常は ConfirmationURL だけで十分です） |
| `{{ .TokenHash }}` | トークンのハッシュ |
| `{{ .SiteURL }}` | プロジェクトの Site URL（Authentication → URL Configuration で設定した値） |

**重要**: 確認メールでは、必ず **`{{ .ConfirmationURL }}`** を本文に入れてください。ユーザーがこのリンクをクリックすることで、メールアドレスが「確認済み」になります。

---

## 3. 件名の例（丁寧な日本語）

```
【AnyPick】メールアドレスのご確認のお願い
```

または

```
AnyPick ご登録の確認メール
```

---

## 4. 本文の例（丁寧な日本語）

以下はコピーしてそのまま使える例です。必要に応じてサービス名「AnyPick」や説明を書き換えてください。

```
AnyPick をご利用いただきありがとうございます。

以下のボタン（またはリンク）をクリックし、メールアドレスのご確認をお願いいたします。

{{ .ConfirmationURL }}

※このメールに心当たりがない場合は、破棄していただいて構いません。

────────────────────
AnyPick - イベントフォト＆応募
────────────────────
```

**シンプルなパターン**

```
いつも AnyPick をご利用いただきありがとうございます。

ご登録いただいたメールアドレスを確認するため、下記のリンクをクリックしてください。

{{ .ConfirmationURL }}

本メールに心当たりがない場合は、お手数ですが破棄してください。

AnyPick 運営
```

---

## 5. 設定の流れ（まとめ）

1. **Authentication** → **Email Templates** を開く
2. **Confirm signup** を選択
3. **Subject** に件名（上記の例など）を入力
4. **Body** に本文（`{{ .ConfirmationURL }}` を含む）を入力
5. **Save** で保存

次回以降の新規登録から、この内容で確認メールが送信されます。

---

## 6. 全テンプレート用：Body（Source 形式）・件名一覧

Authentication → Email Templates の一覧にある **6種類すべて** について、**Body** の Source にそのまま貼り付けられる HTML と、**Subject** 用の件名をまとめています。コピーして Supabase の各テンプレートに貼り付けてください。

---

### ① Confirm sign up（新規登録の確認）

**Subject（件名）**
```
【AnyPick】メールアドレスのご確認のお願い
```

**Body（Source に貼り付け）**
```html
<h2>ご登録の確認</h2>

<p>AnyPick にご登録いただきありがとうございます。メールアドレスを確認するため、下記のリンクをクリックしてください。</p>

<p><a href="{{ .ConfirmationURL }}">メールアドレスを確認する</a></p>

<p>※このメールに心当たりがない場合は、破棄していただいて構いません。</p>
```

---

### ② Invite user（ユーザー招待）

**Subject（件名）**
```
【AnyPick】ご招待のご案内
```

**Body（Source に貼り付け）**
```html
<h2>ご招待のご案内</h2>

<p>AnyPick へご招待されています。以下のリンクをクリックし、アカウントの設定を完了してください。</p>

<p><a href="{{ .ConfirmationURL }}">招待を受け取る</a></p>

<p>※心当たりがない場合は、このメールを破棄してください。</p>
```

---

### ③ Magic link（マジックリンク）

**Subject（件名）**
```
【AnyPick】ログイン用リンクのご案内
```

**Body（Source に貼り付け）**
```html
<h2>ログイン用リンクのご案内</h2>

<p>以下のリンクをクリックすると、ログインが完了します。このリンクは一度だけご利用いただけます。</p>

<p><a href="{{ .ConfirmationURL }}">ログインする</a></p>

<p>※このメールに心当たりがない場合は、破棄してください。</p>
```

---

### ④ Change email address（メールアドレス変更の確認）

**Subject（件名）**
```
【AnyPick】新しいメールアドレスのご確認
```

**Body（Source に貼り付け）**
```html
<h2>メールアドレス変更のご確認</h2>

<p>メールアドレスの変更手続きのため、下記のリンクをクリックして新しいアドレス（{{ .NewEmail }}）を確認してください。</p>

<p><a href="{{ .ConfirmationURL }}">新しいメールアドレスを確認する</a></p>

<p>※心当たりがない場合は、お手数ですが破棄してください。</p>
```

---

### ⑤ Reset password（パスワードリセット）

**Subject（件名）**
```
【AnyPick】パスワードの再設定のご案内
```

**Body（Source に貼り付け）**
```html
<h2>パスワードの再設定</h2>

<p>パスワードの再設定をリクエストされました。下記のリンクをクリックし、新しいパスワードを設定してください。</p>

<p><a href="{{ .ConfirmationURL }}">パスワードを再設定する</a></p>

<p>※リクエストされていない場合は、このメールを破棄してください。パスワードは変更されません。</p>
```

---

### ⑥ Reauthentication（再認証）

**Subject（件名）**
```
【AnyPick】本人確認のご案内
```

**Body（Source に貼り付け）**
```html
<h2>本人確認のお願い</h2>

<p>セキュリティのため、本人確認が必要です。下記のリンクをクリックして手続きを完了してください。</p>

<p><a href="{{ .ConfirmationURL }}">本人確認を行う</a></p>

<p>※心当たりがない場合は、このメールを破棄してください。</p>
```

---

## 7. 設定の流れ（まとめ）

1. **Authentication** → **Email Templates** を開く
2. 上記の ①〜⑥ のうち、編集したい項目をクリック
3. **Subject** に、該当する件名をコピーして貼り付け
4. **Body** の **Source** タブを開き、該当する HTML をコピーして貼り付け
5. **Save** で保存

次回以降、該当する操作が行われたときに、ここで設定した内容でメールが送信されます。
